[program:dinari-validator]
command=/usr/local/bin/gunicorn --bind 0.0.0.0:5000 --workers 2 --timeout 120 app:app
directory=/app
user=dinari
autostart=true
autorestart=true
stderr_logfile=/app/logs/validator-error.log
stdout_logfile=/app/logs/validator-access.log
environment=NODE_TYPE="validator",MINING_ENABLED="true",VALIDATOR_ENABLED="true"

[program:health-monitor]
command=/bin/bash -c 'while true; do curl -f http://localhost:5000/health > /dev/null 2>&1 || echo "Health check failed at $(date)"; sleep 30; done'
directory=/app
user=dinari
autostart=true
autorestart=true
stderr_logfile=/app/logs/health-error.log
stdout_logfile=/app/logs/health-access.log